# RISC-V Reference SoC Implementation using Synopsys and SCL180 PDK  
*A Complete RTL → Synthesis → GLS Flow for VSDCaravel*

## Overview
This repository contains the implementation of a **RISC-V Reference SoC** using the **SCL180 PDK** and **Synopsys Design Tools**, following a complete RTL-to-GLS ASIC design flow.

The SoC used here is **VSDCaravel**, a modified version of the original *Caravel* SoC from Efabless, re-targeted for:
- **SCL180 technology**,  
- **Synopsys-based synthesis**, and  
- **Educational tapeout workflows** under VSD + SCL programs.

This project demonstrates:
- Functional simulation  
- RTL synthesis  
- Gate-level simulation  
- Testbench-based verification  
- Comparison between RTL and GLS  

![image](./images/main.jpg)

- **Mentored by:** VLSI System Design (VSD) team  
- **PDK:** SCL180  
- **Tools:** Synopsys Design Tools  
- **Top Module:** vsdcaravel  

> **caravel** = Efabless + Sky130 + Opensource  
> **vsdcaravel** = VSD + SCL180 + Synopsys  

---

## Features
- Full **RTL → Synthesis → GLS** workflow  
- Uses **SCL180 standard cells** and **I/O libraries**  
- Compatible with Synopsys Design Compiler  
- Functional and gate-level simulation for validation  
- Highly modular and reproducible design flow  
- Tapeout-ready methodology  
- Includes cleaned RTL + synthesis scripts for educational purposes  

---

## Additional Background

### What is Caravel?
Caravel is an open-source SoC "carrier" developed by Efabless. It provides:
- A **management SoC** (RISC-V)  
- A **user project area** for custom logic  
- A **housekeeping SPI** interface  
- Wishbone bus communication  
- GPIO padframe  

It allows designers to integrate custom logic into a standard SoC platform.

### What is VSDCaravel?
VSDCaravel is a **technology-mapped version of Caravel** built for:
- Learners under the VSD–SCL program  
- Synopsys-based ASIC flow  
- SCL180 PDK compatibility  

It mirrors the architecture of Caravel but is optimized for:
- Synopsys Design Compiler  
- SCL standard cells  
- Educational SoC verification  

---

## Caravel / VSDCaravel Architecture Overview

The architecture consists of:

### **1. Management SoC (RISC-V Core)**
- Controls startup  
- Communicates with user logic  
- Runs small firmware for interfacing  

### **2. Housekeeping SPI Interface**
- Used to configure the chip  
- Handles GPIO mode, clock selection, power modes  
- Communicates with on-chip logic  

### **3. Wishbone Interconnect**
- The main bus connecting management SoC ↔ user project area  

### **4. User Project Area**
- Where user RTL is placed  
- In this project, HK-SPI testbench is primarily validated  

### **5. I/O Padframe**
- Exposes signals to top-level pins  
- Provided by SCL I/O PDK  

This structure makes VSDCaravel an ideal teaching SoC.

---

## Repository Structure
```bash
VsdRiscvScl180/
├── dv             # Functional verification files 
├── gl             # GLS support files
├── gls            # Testbench + synthesized netlist GLS setup
├── rtl            # RTL Verilog sources      
├── synthesis      # Synthesis scripts & outputs
│   ├── output     # Synthesized netlist
│   ├── report     # Area, power, QoR reports
│   ├── work       # DC working directory
├── README.md
```

## Prerequisites

### Required Tools
- **SCL180 PDK**
- **Synopsys Design Compiler (dc_shell)**
- **RISC-V GCC Toolchain (`riscv32-unknown-elf-gcc`)**
- **Icarus Verilog**
- **GTKWave**
- **Caravel User Project Framework**

### Ensure
- PDK paths are correctly exported  
- `dc_shell` environment is sourced  
- RISC-V GCC paths match the Makefile  

---

## Test Instructions

---

### 1. Repository Setup
```sh
git clone https://github.com/vsdip/vsdRiscvScl180.git
cd vsdRiscvScl180
```
![Alt Text](Screenshots/TNS.png)

### 2. Functional Simulation Setup

#### Modify paths
- Edit:
```bash
./dv/hkspi/Makefile
```

- Update:
   - GCC_Path
   - scl_io_PATH

![Alt Text](Screenshots/TNS.png)

#### Run Functional Simulation

```bash
cd dv/hkspi
make
vvp hkspi.vvp
```

![Alt Text](Screenshots/TNS.png)

#### View Waveform
```
gtkwave hkspi.vcd hkspi_tb.v
```
![Alt Text](Screenshots/TNS.png)


## 3. Synthesis Setup

- Edit the Synopsys script:
```
./synthesis/synth.tcl
```

- Update:
  - Library path
  - Root directory path
  - SCL PDK path
  - IO library path
  
### 4. Running Synthesis

```bash
cd synthesis/work
dc_shell -f ../synth.tcl
```
![Alt Text](Screenshots/TNS.png)

- Produces:
```bash
./synthesis/output/caravel_synthesis.v
```
![Alt Text](Screenshots/TNS.png)

### 5. Gate-Level Simulation (GLS) Setup

#### Modify Makefile

- Edit:
```
./gls/Makefile
```

- Update:
  - SCL PDK Path
  - GCC Path
  - IO Path
  
![Alt Text](Screenshots/TNS.png)

#### Modify Synthesized Netlist

- Remove blackboxed modules:
```bash
dummy_por  
RAM128  
housekeeping  
```

- Add at top:
```bash
`include "dummy_por.v"
`include "RAM128.v"
`include "housekeeping.v"
```
### 6. Running GLS

```bash
cd gls
make
vvp hkspi.vvp
```

##### Expected GLS Output:
![Alt Text](Screenshots/TNS.png)

- View GLS Waveform:
```bash
gtkwave hkspi.vcd hkspi_tb.v
```

##### Waveform Interpretation:
- Functional Simulation (RTL)
- Shows ideal timing
- Zero delays
- Represents pure logic behavior
- GLS Simulation
- Includes gate delays
- Shows X-propagation
- Closely matches real silicon
- Matching both waveforms ensures
- Correct synthesis
- No functional mismatches
- Timing preserved logically

##### Results:

- Functional simulation validated
- RTL synthesized using Synopsys DC
- Gate-level simulation verified
- No mismatches between RTL and GLS
- Complete area, power, and QoR reports generated

##### Reports:
Area Post-Synthesis Report:
<details> <summary><strong>Area Post-Synthesis Report</strong></summary>
</details>

Power Post-Synthesis Report
<details> <summary><strong>Power Post-Synthesis Report</strong></summary>
</details>

QoR Post-Synthesis Report
<details> <summary><strong>QoR Post-Synthesis Report</strong></summary>
</details>

##### Additional Notes & Observations

- Replacing 1'b0 with vssa is required due to SCL IO static biasing rules
- Blackbox removal ensures GLS works without undefined modules
- The hkspi module was chosen because it interacts heavily with IO and housekeeping logic

##### Future Roadmap

- Integrate SCL POR and RAM macros
- Expand internal testcases for VSDCaravel
- Fix housekeeping module issues
- Complete ICC2 flow and physical design
- Prepare final tapeout-ready GDS
- Add documentation for Wishbone transactions
- Enable full-caravel verification environment

#### Acknowledgements

This project was developed under the VSD–SCL RISC-V SoC Program, enabling students to gain hands-on experience with industrial-grade ASIC design flows.

#### License

This project follows the guidelines under the VSD–SCL program and is intended for educational and research purposes.

